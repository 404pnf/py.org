# ruby中 gsub called for nil:NilClass 如
何解决

请仔细读
http://stackoverflow.com/questions/2660470/sinatra-title-slugs


这个人回答的太好了。我前一段就经常遇到这个问题

What exactly is going wrong?"

Well, the error message is kinda self-explanatory. You called this method with title variable set to nil. To reproduce the error, try calling:

slugify(nil)
I suppose that it failed on this line:

title = title.gsub(s, rep)
To avoid this, you can either check for nil title at the beginning of the method:

raise "wrong input!" if title.nil?
or (IMHO more elegant) always convert title to string, which converts eventual nil to empty string:

title = title.to_s # "any string" => "any string", nil => ""
BTW your code could use some serious refactoring. For a start, try replacing:

title = title.gsub(/a/,/b/)
with

title.gsub!(/a/,/b/)
or use tr method instead of gsub for character-to_character replacement:

"woot".tr("wt","WT") # => "WooT"
http://stackoverflow.com/a/2757733

我当时的解决方法是

 if title.nil?
    title = 'no-titlee'
 end

但我不是特别明白为什么会出现nil?

