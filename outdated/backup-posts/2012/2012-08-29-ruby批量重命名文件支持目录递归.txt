# ruby批量重命名文件支持目录递归

      require 'find'
      require 'fileutils'
      
      def finder( start_dir, look_for, replace_with )
        Find.find( start_dir ) do |path|
          if FileTest.file?( path )
            if path =~ look_for
              old_name = File.basename( path )
              new_name = old_name.gsub( look_for, replace_with )
              dir = path.gsub( /#{old_name}/, '' )
              if File.exists?( dir + old_name )
                puts "#{dir + old_name} to #{dir + new_name}\n"
                FileUtils.mv(dir + old_name, dir + new_name)
              end
            end
          end
        end
      end
      
      finder( '/some/dir/', /\.html$/, '.htm' )

http://www.prodevtips.com/2008/07/16/ruby-file-renamer/
