<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>nginx直接缓存和送出drupal站点的内容 不需要boost 推荐nignx header module这个模块</title>
    <link href="/css/local.css" rel="stylesheet">

    <script type="text/javascript">

    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-3301463-1']);
    _gaq.push(['_trackPageview']);

   (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

    </script>

    </head>
    <body>
<h1>nginx直接缓存和送出drupal站点的内容 不需要boost 推荐nignx header module这个模块</h1>

<p>我使用了。成功了 ：） </p>

<blockquote>
  <p>However, if you really want to use nginx caching you’ll want to:</p>

  <ol>
    <li>
      <p>replace Drupal with Pressflow and set Drupal caching to ‘external’,</p>
    </li>
    <li>
      <p>install my little header module, http://www.brianmercer.com/nginx-header-module for sending the ‘X-Accel-Expires: 0’ header so logged in pages aren’t cached, and</p>
    </li>
    <li>
      <p>use a configuration more like this:</p>

      <pre><code>  location ~* .+.(ico|jpg|gif|jpeg|css|js|flv|png|swf)$ {
    expires max;
   }

   location / {
    proxy_pass       http://apache;
    proxy_set_header  X-Real-IP  $remote_addr;
    proxy_set_header Host $http_host;
    proxy_cache cache;
    proxy_cache_key $host$request_uri$cookie_NO_CACHE;

    proxy_cache_valid 200 304 12h;
    proxy_cache_valid 302 301 12h;
    proxy_cache_valid any 1m;
    proxy_ignore_headers Cache-Control Expires;
    pr
</code></pre>
    </li>
  </ol>
</blockquote>
    </body>
    <footer>
    <a href="/">Home</a>
    </footer>
</html>
