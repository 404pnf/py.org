<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>jekyll处理大量内容时候时间估算</title>
    <link href="/css/local.css" rel="stylesheet">
    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-3301463-1']);
    _gaq.push(['_trackPageview']);
   (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
    </script>
    </head>
    <body>
      <h1>jekyll处理大量内容时候时间估算</h1>

<p>A site with 57000+ posts as sample</p>

<p>cmd used:</p>

<pre><code>  jekyll --server --kramdown --no-auto --limit_posts=num
</code></pre>

<p>All aggreated pages are disabled, yaml frontmatter has only layout and title.</p>

<table>
  <tbody>
    <tr>
      <td>number of posts</td>
      <td>elapsed time</td>
      <td>RES RAM</td>
      <td>VIRT RAM</td>
      <td>CPU</td>
      <td>load average</td>
    </tr>
    <tr>
      <td>2000</td>
      <td>&lt;  10 mins</td>
      <td>317m</td>
      <td>354m</td>
      <td>100%</td>
      <td>1.6 - 3</td>
    </tr>
    <tr>
      <td>10000</td>
      <td>=~ 90 mins</td>
      <td>463m</td>
      <td>493m</td>
      <td>100%</td>
      <td>1.6 - 3</td>
    </tr>
    <tr>
      <td>20000</td>
      <td>=~ 4 hrs</td>
      <td>494m</td>
      <td>522m</td>
      <td>100%</td>
      <td>1.6 - 3</td>
    </tr>
    <tr>
      <td>30000</td>
      <td>6hrs already</td>
      <td>513m</td>
      <td>606m</td>
      <td>100%</td>
      <td>1.6 - 3</td>
    </tr>
    <tr>
      <td>50000</td>
      <td>didn’t try</td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
  </tbody>
</table>

<p>I think eventually the 30K one will finnish sucessfully.</p>

<p>Machine spec:<br />
RAM: 32GB
CPU: 16 cores</p>

<p>Conclusion? </p>

<p>Huge ram desn’t help since the memory usage is predicatable less than three times of the size of all posts.</p>

<p>Multi-core cpu doesn’t help since ruby only uses on core.</p>


    </body>
    <footer>
    <a href="../">Up    </a>
    <a href="/">Home</a>
    <!-- generated on 2013-01-23 09:55:56 +0800 -->
    </footer>
</html>

