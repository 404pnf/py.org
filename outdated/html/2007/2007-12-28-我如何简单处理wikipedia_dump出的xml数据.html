<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>我如何简单处理wikipedia dump出的xml数据</title>
    <link href="/css/local.css" rel="stylesheet">
    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-3301463-1']);
    _gaq.push(['_trackPageview']);
   (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
    </script>
    </head>
    <body>
      <h1>我如何简单处理wikipedia dump出的xml数据</h1>

<h2>我如何简单处理wikipedia dump出的xml数据</h2>

<h2>这个人已经成功了应该</h2>

<p>http://www.softlab.ntua.gr/~ttsiod/buildWikipediaOffline.html</p>

<blockquote>
  <p>http://woc.fslab.de/woc/
This project does, what its name implies: An offline client for Wikipedia. For more information have a look at the Specifications.</p>
</blockquote>

<p>但是他用python等。我也没学会他到底是怎么弄的。
谁看懂了能写些东西讲解一下么？谢谢。</p>

<h2>我的方法</h2>
<p>以zh-wikibooks为例子
如果从浏览文章的角度来说 2个tag中内容意义如果用regex获取title内容很简单。获取text有些麻烦，找到首尾两个tag，保留中间的。中间这部分和title行之外，其它行全部删除。</p>

<p>然后需要把这些内容生成单篇文章。</p>

<p>看来用xslt处理会方便得多。</p>

<p>这几match那个entity然后储来，其它entity删除？</p>

<p>继续研究</p>

<p>perl xml parser
http://www.google.com/search?hl=en&amp;newwindow=1&amp;client=firefox-a&amp;rls=com.ubuntu%3Aen-US%3Aofficial&amp;hs=rYN&amp;q=perl+xml+parser&amp;btnG=Search</p>

<p>sed xml parser
http://www.google.com/search?hl=en&amp;newwindow=1&amp;client=firefox-a&amp;rls=com.ubuntu%3Aen-US%3Aofficial&amp;hs=gEi&amp;q=sed+xml+parser&amp;btnG=Search</p>

<p>sed xml
http://www.google.com/search?hl=en&amp;newwindow=1&amp;client=firefox-a&amp;rls=com.ubuntu%3Aen-US%3Aofficial&amp;hs=wu2&amp;q=sed+xml&amp;btnG=Search</p>

<p>http://www.stylusstudio.com/xml/parser.html</p>

<p>http://www.issociate.de/board/post/274426/SED_&amp;_XML.html
如何保留两个tag之间的内容。非常有帮助</p>

<pre><code>       sed -ne '//,//!d' \ -e
</code></pre>

<p>http://blog.dotkam.com/2007/04/04/sed-to-parse-and-modify-xml-element-nodes/</p>

<p>command line xslt processor
http://xmlsoft.org/XSLT/xsltproc.html
默认bash中就有这个工具。至少我直接在bash输入xsltproc就出来了。</p>

<pre><code>   sed -e '/ /!d' -e '/ /!d' 
</code></pre>

<p>这个不对。我觉得问题出在第一个-e删除了没有title的行。第2个要找的根本没有，已经被第一个删除了。第2个一看剩下的行也没有它要的，就都删除了。所以生成的文件是一个空文件。</p>

<p>http://www.gnu.org/software/sed/manual/sed.html
http://www.gnu.org/software/sed/manual/sed.html#Other-Resources</p>

<h2>sed进行不去分大小写的查查找</h2>
<blockquote>
  <p>Several versions of sed support case-insensitive matching: ssed and GNU sed v3.02+ (with I flag after s/// or /regex/); 
http://www.student.northpark.edu/pemente/sed/sedfaq4.html#s4.10</p>
</blockquote>

<h2>xmlto</h2>
<p>http://cyberelk.net/tim/software/xmlto/</p>

<h2>成功</h2>

<pre><code>  sed -n -e '/ /p' -e '/ /p' zhwikibooks-20071129-pages-meta-current.xml &gt; result_zhwikibok.xml
</code></pre>

<p>这里第2个
有问题。现在这种写法它直接把第一个
和最后一个之间都打印了。</p>

    </body>
    <footer>
    <a href="../">Up    </a>
    <a href="/">Home</a>
    <!-- generated on 2013-01-23 09:56:06 +0800 -->
    </footer>
</html>

