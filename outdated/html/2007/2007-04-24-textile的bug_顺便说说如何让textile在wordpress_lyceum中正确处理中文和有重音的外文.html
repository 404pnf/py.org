<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>textile的bug 顺便说说如何让textile在wordpress lyceum中正确处理中文和有重音的外文</title>
    <link href="/css/local.css" rel="stylesheet">
    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-3301463-1']);
    _gaq.push(['_trackPageview']);
   (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
    </script>
    </head>
    <body>
      <h1>textile的bug 顺便说说如何让textile在wordpress lyceum中正确处理中文和有重音的外文</h1>

<p>textile的bug；顺便说说如何让textile在wordpress/lyceum中正确处理中文和有重音的外文</p>

<p>textile的作者没有在textile.php中明确输入和输入的语言类型造成了中文变成乱码。</p>

<p>修改的方法</p>

<p>编辑textile.php查找 char_encoding 这个关键词
找到下面几行</p>

<pre><code>   // head_offset sets the amount to increase     header level (i.e. h1. be$
       $textile-&gt;options['head_offset'] = $this-&gt;settings['0'];
       $textile-&gt;options['char_encoding'] = $this-&gt;settings['utf-8'];
       $textile-&gt;options['input_encoding'] = $this-&gt;settings['utf-8'];
</code></pre>

<p>我现在改成utf-8的地方以前写的是 Encoding和InputEncoding。看drupal社区的人说这个代码如果不明确改成你用的字符集，那么就会出现问题，因为encoding和inputencoding都是错误的值，这个php脚本就无法知道用户到底用的什么字符集。改成你用的就好了。</p>

<p>参考</p>

<blockquote>
  <p>http://drupal.org/node/6881
5 submitted by Gabriel Radic on July 30, 2004 - 10:37
If you are using UTF-8, changing the char_encoding option is recomended and it works well.</p>
</blockquote>

<blockquote>
  <p>http://drupal.org/node/11357
6 submitted by jhriggs on March 21, 2005 - 16:32
There were two things going on here. First, the module did not specify utf-8 as the charset for the Textile class. Second, there was a bug in TextilePHP that caused it to ignore false values for char_encoding. This is all addressed in the latest files in CVS. The lastest version for both 4.5 and 4.6 should work properly.</p>
</blockquote>

<p>现在我可以在lyceum中使用textile了。</p>

<p>2年前我就遇到了textile处理中文的问题。当时提交bug report也没人理我。</p>

<p>现在不同了，今天晚上花了快一个小时，最后还是在drupal这里找到了方法。而且这个bug是drupal志愿者port textile成为一个drupal module是发现和解决的。网上我没找到任何关于这个bug的文章。官方wordpress插件也存在这个bug。我把它解决了。自己可以使用了。真是高兴 ：） </p>

<p>特别高兴。</p>

<p>本周第二高兴的事情。</p>

<p>这个产生的影响将是深远的。哈哈。因为我要用lyceum了。以后也可以尝试在drupal中使用这个输入法。</p>

<p>本周第一高兴的是lvcha写了个ruby脚本帮我处理从html文件中提取我要下载的mp3的url。过过再写那件高兴的事。</p>

    </body>
    <footer>
    <a href="../">Up    </a>
    <a href="/">Home</a>
    <!-- generated on 2013-01-23 09:56:03 +0800 -->
    </footer>
</html>

