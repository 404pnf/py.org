<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>几个和gallery有关的 to do</title>
    <link href="/css/local.css" rel="stylesheet">
    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-3301463-1']);
    _gaq.push(['_trackPageview']);
   (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
    </script>
    </head>
    <body>
      <h1>几个和gallery有关的 to do</h1>

<p>管理员们请都看一下</p>

<p>break</p>

<h2>情况</h2>

<p>因为以前分开账户的时候，她两边帐户名不一样。所以我们选择了保留在日记本的账户：老妖。整合后老妖在相册中也是一个用户了。我管理员登陆把以前她的相册，用户名为redesor分配给新用户老妖。之后，再将redsor所有相册move album到老妖的个人相册下。完毕了。</p>

<p>以后有2边账号不统一的朋友也这么处理。</p>

<p>其实可以保证用户相册的url也不变的。方法就是把以前redsor的个人相册中的子相册都move走后，把这个用户相册删除了。之后编辑老妖的user album。把url设置为以前一样的。</p>

<h2>to do:</h2>

<p>这回老妖选择了新的url，用汉语拼音更简单。所以，她以前日记连到旧地址就不能访问了。如何解决？</p>

<p>不要用apacehe mod_rewrite。我更倾向于直接在数据库中node里面update内容。比如把所有 pengyou.rijiben.org/g2/redsor 的地方都找到并替换为 pengyou.rijiben.org/g2/redsor 这样用户自己不用去一个个改，她也感觉不到这种批量替换，还不用写什么url redirect。</p>

<p>能否在数据库中这样替换。请小拉测试。</p>

<p>现在相册中没有返回日记本的链接。用户很不方便。这个是gallery的一个缺点。很难加入静态的内容或者block。我以前在它论坛上看过。还需要再看。如果不行，看看能不能把链接直接写到模版上吧。</p>

<h2>另外一个好消息</h2>
<p>小拉基本hack出了drupal的一个模块。哈哈。用处就是每个用户可以方便按月份查看自己的日记。代码短小，灵活性很强。</p>

<p>内侧好了放上来，并且会提交给drupal.org。</p>

    </body>
    <footer>
    <a href="../">Up    </a>
    <a href="/">Home</a>
    <!-- generated on 2013-01-23 09:55:34 +0800 -->
    </footer>
</html>

