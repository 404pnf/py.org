# drupal中附件能否直接访问的设置和这里为什么设置为附件可以直接访问和如果你不喜欢这样的设置怎么办

站务事情。没兴趣的请按多次空格健跳过

刚才看了一下webalizer的统计。两个现象

1。发现图表的小棍棍都特别矮了，原来是因为昨天的点击数特别高，为了适应比例，其他的都很矮了。
这是因为一个bbs昨天遭到垃圾留言轰炸。这个小拉了解情况。

2。 发现本月带宽使用已经达到了470g~!检查一下，发现了问题所在。流量排在前面的是

         # 	Hits 	        KBytes 	                   URL
         1 	133719 	5.94% 	311779729 	66.32% 	/files/22lige.mp3
         2 	14850 	0.66% 	28581239 	6.08% 	/files/12-Journey.mp3
         3 	7983 	0.35% 	26401546 	5.62% 	/files/1blackandwhite.mp3
         
看来 lige 这首歌很红啊。哈哈 ；） “想留不能留才最寂寞”。听着挺熟悉不知道谁唱的。

言归正传。这些引用和下载这么多是因为我在远来日记本目录保留了所有的的内容，没有删除。因为前2周迁移站点的时候怕万一出现问题老地方还能用。也许是那个搜索引擎搜索mp3发现了咱们这里，然后大家开始疯狂下载。可怕呀。一首lige流量就达到了300g。

那个以前的目录我已经删除了。但东西不会丢，因为都早已经复制到新站点了。 以前在msnspace上引用这些歌的朋友请修改一下地址。或者重新贴一次在 http://pengyou.rijiben.org 上面复制的附件地址就好了

有一个问题。drupal中是可以控制外部能否允许直接访问drupal附件的。如果能直接访问，别人通过搜索引擎过来或者直接发附件地址给朋友。也可以直接在msnspace上等引用这里的mp3。如果设置为不能直接直接访问，就必须在该附件文章页面点下载。我想drupal是通过referer来判断。因为浏览器在get的时候，应该发送自己现在的位置，drupal比较一下当前浏览器处在的页面是否是附件文件的父页面来判断让不让它get。我是这么理解的。你们怎么看。

#### 我有一个问题，为什么搜索引擎搜到的都是以前目录中的，我的新目录中也有这些文件，但是没有被直接访问多少次啊？

说不清楚技术我继续说我为什么用附件允许直接访问。

先提醒大家，如果你们自己也用drupal，能否直接访问这个设置开始早定下来，日后不要改。drupal自己会提醒你，如果你改了，可能会造成之前的很多附件法正常访问。

我的情况时开始我设置为不能直接访问。这个主要是为了保护有的朋友上传附件只给少数几个朋友看，或者不想被别人轻易下载（不让别人下载是不可能做到的，只能让别人下载起来更麻烦）。但开始有朋友说msnspace不能直接引用这里的mp3，后来我觉得还是能够直接访问，因为这样的话更多的朋友可以通过不同方式获得这里的内容，比如aggregator等。谁愿意天天点鼠标啊。

所以，我设置为可以直接访问，以后也一直会这样。

如果你有特殊需要，比如我的附件就是不让别人直接访问等，可以 1）是我要好朋友的直接告诉我，让人教你使用drupal的组（organic group）2）给钱找人教你或你单独架一个站点呗。




2006-12-26