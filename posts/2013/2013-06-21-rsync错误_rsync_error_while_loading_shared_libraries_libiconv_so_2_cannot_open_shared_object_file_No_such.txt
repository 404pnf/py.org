# rsync错误 rsync: error while loading shared libraries: libiconv.so.2: cannot open shared object file: No such 

## 错误
rsync: error while loading shared libraries: libiconv.so.2: cannot open shared object file: No such file or directory

## 详细描述

机器A是yum装的rsync。机器B是编译安装的rsync（该机器是RH且没有付费，真是自虐）。

在机器A使用 rsync -avz serverB:/home/backup/ test/

返回上面错误

## 解决方法
> 解决办法：在/etc/ld.so.conf中加一行/usr/local/lib，运行ldconfig。再运行/usr/local/rsync/bin/rsync --daemon，就可以了。报错的原因可能之前更新过iconv库.
> 如果你不是root，ldconfig也运行不了的，解决的方法就是，设置环境变量 LDFLAGS=-L/usr/local/lib

参考:
<http://hi.baidu.com/richarwu/item/57c1b3e5dc639ab22e140bf1>
<http://lwwbe.blogbus.com/logs/48426247.html>


2013-06-21