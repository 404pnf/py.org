我现在通过phpmyadmin查看mysql参数时是红色的变量有

Innodb\_buffer\_pool\_reads 43 k InnoDB 进行逻辑读取时无法从缓冲池中获取而执行单页读取的次数 ## Innodb\_buffer\_pool\_reads The number of logical reads that InnoDB could not satisfy from the buffer pool, and had to read directly from the disk. 参考： http://dev.mysql.com/doc/refman/5.0/en/server-status-variables.html#statvar\_Innodb\_buffer\_pool\_reads 解决方法我认为是增大pool。 set global innodb\_buffer\_pool\_size = 8G ## Handler\_read\_rnd 12 k 根据固定位置读取行的请求数。如果你执行很多需要排序的查询，该值会很高。你可能有很多需要完整表扫描的查询，或者你使用了不正确的索引用来多表查询。 参考： http://www.mysqlperformanceblog.com/2010/06/15/what-does-handler\_read\_rnd-mean/ 这个值不能改。要改改数据库索引。 ## Handler\_read\_rnd\_next 10 M 从数据文件中读取行的请求数。如果你在扫描很多表，该值会很大。通常情况下这意味着你的表没有做好索引，或者你的查询语句没有使用好索引字段。 这个值不能改。要改改数据库索引。 ## Binlog\_cache\_disk\_use 22 因事务使用的临时二进制日志缓存超出 binlog\_cache\_size 的设置而使用临时文件存储的数量。 参考： http://dev.mysql.com/doc/refman/5.1/en/replication-options-binary-log.html#sysvar\_binlog\_cache\_size ## Created\_tmp\_disk\_tables 270 服务器执行语句时自动在磁盘上创建的临时表的数量。如果 Created\_tmp\_disk\_tables 很大，你可以增加 tmp\_table\_size 的值，让服务器使用内存来存储临时表而非磁盘。 参考： 这个和上面的2个都是因为e tmp\_table\_size and max\_heap\_table\_size 不够大吧。 ## Key\_reads 2,048 从磁盘中物理读取键块的次数。如果 Key\_reads 很大，则说明您的 key\_buffer\_size 可能设置得太小了。缓存缺失率可以由 Key\_reads/Key\_read\_requests 计算得出 解决； set global key\_buffer\_size = 200\*1024\*1024 ## Sort\_merge\_passes 24 排序算法使用归并的次数。如果该值很大，您应该考虑增加系统变量 sort\_buffer\_size 的值。 解决： 现在的值 mysqladmin -uroot -pj variables|grep sort\_buffer | myisam\_sort\_buffer\_size |8388608 | | sort\_buffer\_size | 2097144 set global sort\_buffer\_size = 200\*1024\*1024 set global myisam\_sort\_buffer\_size = 200\*1024\*1024 ## Opened\_tables 25 k 已经打开的表个数。如果该值很大，则说明表缓冲大小可能设置过小。 参考： http://dev.mysql.com/doc/refman/5.0/en/table-cache.html > If the value is very large or increases rapidly, even when you have not issued many FLUSH TABLES statements, you should increase the table cache size. See Section 5.1.3, “Server System Variables”, and Section 5.1.5, “Server Status Variables”. 参考： http://dev.mysql.com/doc/refman/5.0/en/server-system-variables.html#sysvar\_table\_cache Command-Line Format --table\_cache=# Option-File Format table\_cache Option Sets Variable Yes, table\_cache Variable Name table\_cache Variable Scope Global Dynamic Variable Yes Deprecated 5.1.3, by table\_open\_cache Permitted Values Type numeric Default 64 Range 1-524288 解决： 这个 table\_cache 的变量我的mysql中没有，但有 table\_open\_cache 这个参数 | table\_open\_cache | 64 默认值是64.看来就是它 解决： set global table\_open\_cache = 6400

2011-09-27